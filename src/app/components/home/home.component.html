
<h2>
  Hey There! Welcome to Spower Hour.
</h2>
<p>
  <strong>Power Hour</strong> is a drinking game where players must consume one shot of beer every minute 
  or an hour. People playing this game listen to a set of tracks which advances to the next track after
  one has been playing for one minute. When the track changes, everyone takes a drink. 
</p>
<p>
  <strong>Spotify</strong> is an online audio streaming platform that allows its users to build playlists
  of their favorite songs.
</p>
<p>
  <strong>Spower Hour</strong> lets you and your friends do a power hour using a Spotify Playlist!
</p>
<p>
  To get started, click the button below to connect your spotify account.
</p>

<mat-vertical-stepper [linear]="true" #stepper [selectedIndex]="currentStep">
  <mat-step [completed]="checkStep(1)">
    <ng-template matStepLabel>Step 1: Connect your Spotify account!</ng-template>
    <div *ngIf="!spotifyApiService.isConnected()">
      <button (click)="spotifyConnect()" mat-raised-button color="primary">Connect your Spotify Account</button>
    </div>
    <div *ngIf="spotifyApiService.isConnected()">
      You are connected!
    </div>
  </mat-step>
  <mat-step [completed]="checkStep(2)">
    <ng-template matStepLabel>Step 2: Choose a Device!</ng-template>
    <button mat-raised-button color="primary" *ngFor="let device of spotifyApiService.devices" (click)="this.setDevice(device)">
      {{ device.name }}
    </button>
    <mat-divider></mat-divider>
    <div>Don't see your device? Open spotify on that device and click here to refresh the list above.</div>
    <button mat-raised-button color="primary" (click)="spotifyApiService.getDevices()">
      <mat-icon aria-hidden="false" aria-label="Refresh">refresh</mat-icon>
      Refresh
    </button>
  </mat-step>
  <mat-step [completed]="checkStep(3)">
    <ng-template matStepLabel>Step 3: Choose a Playlist!</ng-template>
    <mat-grid-list cols="4">
      <mat-grid-tile  *ngFor="let playlist of spotifyApiService.playlists" (click)="this.selectPlaylist(playlist)">
        <mat-card class="playlistCard">
          <mat-card-header>
            <mat-card-title>{{ playlist.name }}</mat-card-title>
          </mat-card-header>
          <img mat-card-image [src]="playlist.images[0].url" [alt]="playlist.name + ' image'"> 
        </mat-card>     
      </mat-grid-tile>
    </mat-grid-list>
</mat-step>
  <mat-step [completed]="checkStep(4)">
    <ng-template matStepLabel>Step 4: Start the Spower Hour!</ng-template>
    <div *ngIf="spotifyApiService.currentTrack" class="currentTrack">
      <div class="currentTrackImage">
        <img [src]="spotifyApiService.currentTrack.item.album.images[0].url" />
        <div class="currentTrackCounter" *ngIf="counter">
          {{ counter }}
        </div>      
      </div>
      <div>{{ spotifyApiService.currentTrack.item.name }}</div>
    </div>
  </mat-step>
</mat-vertical-stepper>